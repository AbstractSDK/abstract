{
  "contract_name": "manager",
  "contract_version": "0.1.0-rc.2",
  "idl_version": "1.0.0",
  "instantiate": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "InstantiateMsg",
    "type": "object",
    "required": [
      "governance_type",
      "module_factory_address",
      "name",
      "os_id",
      "root_user",
      "version_control_address"
    ],
    "properties": {
      "description": {
        "type": [
          "string",
          "null"
        ]
      },
      "governance_type": {
        "type": "string"
      },
      "link": {
        "type": [
          "string",
          "null"
        ]
      },
      "module_factory_address": {
        "type": "string"
      },
      "name": {
        "type": "string"
      },
      "os_id": {
        "type": "integer",
        "format": "uint32",
        "minimum": 0.0
      },
      "root_user": {
        "type": "string"
      },
      "subscription_address": {
        "type": [
          "string",
          "null"
        ]
      },
      "version_control_address": {
        "type": "string"
      }
    },
    "additionalProperties": false
  },
  "execute": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "ExecuteMsg",
    "description": "Execute messages",
    "oneOf": [
      {
        "description": "Forward execution message to module",
        "type": "object",
        "required": [
          "exec_on_module"
        ],
        "properties": {
          "exec_on_module": {
            "type": "object",
            "required": [
              "exec_msg",
              "module_id"
            ],
            "properties": {
              "exec_msg": {
                "$ref": "#/definitions/Binary"
              },
              "module_id": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Updates the `OS_MODULES` map Only callable by os factory or root.",
        "type": "object",
        "required": [
          "update_module_addresses"
        ],
        "properties": {
          "update_module_addresses": {
            "type": "object",
            "properties": {
              "to_add": {
                "type": [
                  "array",
                  "null"
                ],
                "items": {
                  "type": "array",
                  "items": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "maxItems": 2,
                  "minItems": 2
                }
              },
              "to_remove": {
                "type": [
                  "array",
                  "null"
                ],
                "items": {
                  "type": "string"
                }
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Create module using module factory, callable by Root",
        "type": "object",
        "required": [
          "create_module"
        ],
        "properties": {
          "create_module": {
            "type": "object",
            "required": [
              "module"
            ],
            "properties": {
              "init_msg": {
                "description": "Instantiate message used to instantiate the contract.",
                "anyOf": [
                  {
                    "$ref": "#/definitions/Binary"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "module": {
                "description": "Module information.",
                "allOf": [
                  {
                    "$ref": "#/definitions/Module"
                  }
                ]
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Registers a module after creation. Only callable by module factory.",
        "type": "object",
        "required": [
          "register_module"
        ],
        "properties": {
          "register_module": {
            "type": "object",
            "required": [
              "module",
              "module_addr"
            ],
            "properties": {
              "module": {
                "$ref": "#/definitions/Module"
              },
              "module_addr": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Remove a module",
        "type": "object",
        "required": [
          "remove_module"
        ],
        "properties": {
          "remove_module": {
            "type": "object",
            "required": [
              "module_name"
            ],
            "properties": {
              "module_name": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Upgrade the module to a new version If module is `abstract::manager` then the contract will do a self-migration.",
        "type": "object",
        "required": [
          "upgrade"
        ],
        "properties": {
          "upgrade": {
            "type": "object",
            "required": [
              "module"
            ],
            "properties": {
              "migrate_msg": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/Binary"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "module": {
                "$ref": "#/definitions/Module"
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Update info",
        "type": "object",
        "required": [
          "update_info"
        ],
        "properties": {
          "update_info": {
            "type": "object",
            "properties": {
              "description": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "link": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "name": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Sets a new Root",
        "type": "object",
        "required": [
          "set_root"
        ],
        "properties": {
          "set_root": {
            "type": "object",
            "required": [
              "root"
            ],
            "properties": {
              "governance_type": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "root": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Suspend manager contract",
        "type": "object",
        "required": [
          "suspend_os"
        ],
        "properties": {
          "suspend_os": {
            "type": "object",
            "required": [
              "new_status"
            ],
            "properties": {
              "new_status": {
                "type": "boolean"
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      }
    ],
    "definitions": {
      "Binary": {
        "description": "Binary is a wrapper around Vec<u8> to add base64 de/serialization with serde. It also adds some helper methods to help encode inline.\n\nThis is only needed as serde-json-{core,wasm} has a horrible encoding for Vec<u8>",
        "type": "string"
      },
      "Module": {
        "type": "object",
        "required": [
          "info",
          "kind"
        ],
        "properties": {
          "info": {
            "$ref": "#/definitions/ModuleInfo"
          },
          "kind": {
            "$ref": "#/definitions/ModuleKind"
          }
        },
        "additionalProperties": false
      },
      "ModuleInfo": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "version": {
            "type": [
              "string",
              "null"
            ]
          }
        },
        "additionalProperties": false
      },
      "ModuleKind": {
        "type": "string",
        "enum": [
          "add_on",
          "a_p_i",
          "service",
          "perk"
        ]
      }
    }
  },
  "query": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "QueryMsg",
    "oneOf": [
      {
        "description": "Returns [`ModuleVersionsResponse`]",
        "type": "object",
        "required": [
          "module_versions"
        ],
        "properties": {
          "module_versions": {
            "type": "object",
            "required": [
              "names"
            ],
            "properties": {
              "names": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Returns [`ModuleAddressesResponse`]",
        "type": "object",
        "required": [
          "module_addresses"
        ],
        "properties": {
          "module_addresses": {
            "type": "object",
            "required": [
              "names"
            ],
            "properties": {
              "names": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Returns [`ModuleInfosResponse`]",
        "type": "object",
        "required": [
          "module_infos"
        ],
        "properties": {
          "module_infos": {
            "type": "object",
            "properties": {
              "page_size": {
                "type": [
                  "integer",
                  "null"
                ],
                "format": "uint8",
                "minimum": 0.0
              },
              "page_token": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Returns [`ConfigResponse`]",
        "type": "object",
        "required": [
          "config"
        ],
        "properties": {
          "config": {
            "type": "object",
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      },
      {
        "description": "Returns [`InfoResponse`]",
        "type": "object",
        "required": [
          "info"
        ],
        "properties": {
          "info": {
            "type": "object",
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      }
    ]
  },
  "migrate": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MigrateMsg",
    "type": "object",
    "additionalProperties": false
  },
  "sudo": null,
  "responses": {
    "config": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ConfigResponse",
      "type": "object",
      "required": [
        "module_factory_address",
        "os_id",
        "root",
        "version_control_address"
      ],
      "properties": {
        "module_factory_address": {
          "type": "string"
        },
        "os_id": {
          "$ref": "#/definitions/Uint64"
        },
        "root": {
          "type": "string"
        },
        "version_control_address": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "definitions": {
        "Uint64": {
          "description": "A thin wrapper around u64 that is using strings for JSON encoding/decoding, such that the full u64 range can be used for clients that convert JSON numbers to floats, like JavaScript and jq.\n\n# Examples\n\nUse `from` to create instances of this and `u64` to get the value out:\n\n``` # use cosmwasm_std::Uint64; let a = Uint64::from(42u64); assert_eq!(a.u64(), 42);\n\nlet b = Uint64::from(70u32); assert_eq!(b.u64(), 70); ```",
          "type": "string"
        }
      }
    },
    "info": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "InfoResponse",
      "type": "object",
      "required": [
        "info"
      ],
      "properties": {
        "info": {
          "$ref": "#/definitions/OsInfo"
        }
      },
      "additionalProperties": false,
      "definitions": {
        "OsInfo": {
          "type": "object",
          "required": [
            "chain_id",
            "governance_type",
            "name"
          ],
          "properties": {
            "chain_id": {
              "type": "string"
            },
            "description": {
              "type": [
                "string",
                "null"
              ]
            },
            "governance_type": {
              "type": "string"
            },
            "link": {
              "type": [
                "string",
                "null"
              ]
            },
            "name": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      }
    },
    "module_addresses": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ModuleAddressesResponse",
      "type": "object",
      "required": [
        "modules"
      ],
      "properties": {
        "modules": {
          "type": "array",
          "items": {
            "type": "array",
            "items": [
              {
                "type": "string"
              },
              {
                "type": "string"
              }
            ],
            "maxItems": 2,
            "minItems": 2
          }
        }
      },
      "additionalProperties": false
    },
    "module_infos": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ModuleInfosResponse",
      "type": "object",
      "required": [
        "module_infos"
      ],
      "properties": {
        "module_infos": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ManagerModuleInfo"
          }
        }
      },
      "additionalProperties": false,
      "definitions": {
        "ContractVersion": {
          "type": "object",
          "required": [
            "contract",
            "version"
          ],
          "properties": {
            "contract": {
              "description": "contract is the crate name of the implementing contract, eg. `crate:cw20-base` we will use other prefixes for other languages, and their standard global namespacing",
              "type": "string"
            },
            "version": {
              "description": "version is any string that this implementation knows. It may be simple counter \"1\", \"2\". or semantic version on release tags \"v0.7.0\", or some custom feature flag list. the only code that needs to understand the version parsing is code that knows how to migrate from the given contract (and is tied to it's implementation somehow)",
              "type": "string"
            }
          }
        },
        "ManagerModuleInfo": {
          "type": "object",
          "required": [
            "address",
            "name",
            "version"
          ],
          "properties": {
            "address": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "version": {
              "$ref": "#/definitions/ContractVersion"
            }
          },
          "additionalProperties": false
        }
      }
    },
    "module_versions": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ModuleVersionsResponse",
      "type": "object",
      "required": [
        "versions"
      ],
      "properties": {
        "versions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ContractVersion"
          }
        }
      },
      "additionalProperties": false,
      "definitions": {
        "ContractVersion": {
          "type": "object",
          "required": [
            "contract",
            "version"
          ],
          "properties": {
            "contract": {
              "description": "contract is the crate name of the implementing contract, eg. `crate:cw20-base` we will use other prefixes for other languages, and their standard global namespacing",
              "type": "string"
            },
            "version": {
              "description": "version is any string that this implementation knows. It may be simple counter \"1\", \"2\". or semantic version on release tags \"v0.7.0\", or some custom feature flag list. the only code that needs to understand the version parsing is code that knows how to migrate from the given contract (and is tied to it's implementation somehow)",
              "type": "string"
            }
          }
        }
      }
    }
  }
}
